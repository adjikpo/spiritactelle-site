# Dockerfile.dev - Image de developpement Next.js avec Bun
FROM oven/bun:1-alpine

# Installer les outils necessaires
RUN apk add --no-cache git

# Definir le repertoire de travail
WORKDIR /app

# Copier les fichiers de dependances (si existants)
COPY package.json* bun.lockb* ./

# Installer les dependances si package.json existe
RUN if [ -f "package.json" ]; then bun install; fi

# Copier le reste du code source
COPY . .

# Exposer le port 3000
EXPOSE 3000

# Variables d'environnement pour le hot reload
ENV WATCHPACK_POLLING=true
ENV CHOKIDAR_USEPOLLING=true

# Commande de demarrage
CMD ["bun", "run", "dev"]
